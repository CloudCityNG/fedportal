{"version":3,"sources":["admin_academics/staff_profile/create-profile/js/create-profile.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","$","enableSubmit","$staffProfile","size","disabled","$submitBtn","$checkProfileData","each","$el","this","prop","val","trim","name","getName","originalVal","staffProfileData","$toggler","closest","find","click","upperVal","toUpperCase","original","selectedOriginal","options","$selectedCapability","length","_","contains","Number","propName","NAME_RE","RegExp","exec","updateSelections","capabilitiesToSelectFrom","capabilitiesSelected","text","$capabilitiesSelected","JSON","stringify","$selectCapability","$capabilitiesToSelectFrom","parse","$selected","append","clone","remove","formValidation","is","hide","next","show","children","$formControl","first","$formGrp","parents","removeClass","prev","$capabilitiesArrow","$allOptions","attr","blur"],"mappings":"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","file":"admin_academics/staff_profile/create-profile/js/create-profile.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t$(function () {\r\n\t  \"use strict\";\r\n\r\n\t  var $capabilitiesToSelectFrom = $('#capabilities-to-select-from')\r\n\t  var $capabilitiesSelected = $('#capabilities-selected')\r\n\t  var $selectCapability = $('#select-capabilities')\r\n\t  var $selectedCapability = $('#selected-capabilities')\r\n\t  var $staffProfile = $('#staff-profile-data')\r\n\t  var staffProfileData = JSON.parse($staffProfile.val() || '{}')\r\n\t  var $checkProfileData = $('.check-original-profile-data')\r\n\t  var selectedOriginal = JSON.parse($('#capabilities-selected-original').val() || 'null');\r\n\r\n\t  (function capabilitySelectionFn() {\r\n\t    $('#select-one-capability').click(function () {\r\n\t      var $selected = $selectCapability.find('option:selected')\r\n\t      $selectedCapability.append($selected.clone())\r\n\t      $selected.remove()\r\n\t      updateSelections()\r\n\t    })\r\n\r\n\t    $('#deselect-one-capability').click(function () {\r\n\t      var $selected = $selectedCapability.find('option:selected')\r\n\t      $selectCapability.append($selected.clone())\r\n\t      $selected.remove()\r\n\t      updateSelections()\r\n\t    })\r\n\r\n\t    $('#select-all-capabilities').click(function () {\r\n\t      var $selected = $selectCapability.find('option')\r\n\t      $selectedCapability.append($selected.clone())\r\n\t      $selected.remove()\r\n\t      updateSelections()\r\n\t    })\r\n\r\n\t    $('#deselect-all-capabilities').click(function () {\r\n\t      var $selected = $selectedCapability.find('option')\r\n\t      $selectCapability.append($selected.clone())\r\n\t      $selected.remove()\r\n\t      updateSelections()\r\n\t    })\r\n\t  })();\r\n\r\n\t  $('#staff-profile-create-form').formValidation()\r\n\r\n\t  $('.toggle-form-control-edit').click(function () {\r\n\t    var $el = $(this);\r\n\r\n\t    if ($el.is('.glyphicon-pencil')) {\r\n\t      $el.hide().next().show().closest('.input-group').children('.form-control').prop('disabled', false);\r\n\r\n\t    } else {\r\n\t      var $formControl = $el.closest('.input-group').children('.form-control').first().prop('disabled', true)\r\n\t      var propName = getName($formControl.prop('name'))\r\n\r\n\t      if (!_.contains(['password', 'confirm_password'], propName)) $formControl.val(staffProfileData[propName])\r\n\t      else $formControl.val('')\r\n\r\n\t      var $formGrp = $formControl.parents('.form-group').removeClass('has-success').removeClass('has-error')\r\n\t      $formGrp.children('.form-control-feedback').hide()\r\n\t      $formGrp.children('.help-block').hide()\r\n\t      $el.hide().prev().show()\r\n\t      enableSubmit()\r\n\t    }\r\n\t  });\r\n\r\n\t  (function toggleCapabilitiesEdit() {\r\n\t    var $capabilitiesArrow = $('.capability-select-deselect');\r\n\t    var $allOptions = $('.assign-capabilities-group option').clone()\r\n\r\n\t    $('.toggle-capabilities-edit').click(function () {\r\n\t      var $el = $(this);\r\n\r\n\t      if ($el.is('.glyphicon-pencil')) {\r\n\t        $el.hide().next().show()\r\n\t        $capabilitiesArrow.show()\r\n\t        $selectCapability.prop('disabled', false)\r\n\t        $selectedCapability.prop('disabled', false)\r\n\t        $capabilitiesToSelectFrom.prop('disabled', false)\r\n\t        $capabilitiesSelected.prop('disabled', false)\r\n\r\n\t      } else {\r\n\t        $el.hide().prev().show()\r\n\t        $capabilitiesArrow.hide()\r\n\t        $selectCapability.prop('disabled', true)\r\n\t        $selectedCapability.prop('disabled', true)\r\n\t        $capabilitiesToSelectFrom.prop('disabled', true)\r\n\t        $capabilitiesSelected.prop('disabled', true)\r\n\t        $selectCapability.find('option').remove()\r\n\t        $selectedCapability.find('option').remove()\r\n\r\n\t        if (!selectedOriginal) $selectCapability.append($allOptions)\r\n\t        else {\r\n\t          $allOptions.each(function () {\r\n\t            var $el = $(this).attr('selected', false)\r\n\t            if (_.contains(selectedOriginal, Number($el.val())))$selectedCapability.append($el)\r\n\t            else $selectCapability.append($el)\r\n\t          })\r\n\t        }\r\n\r\n\t        updateSelections()\r\n\t      }\r\n\t    })\r\n\t  })();\r\n\r\n\t  $checkProfileData.blur(function () {\r\n\t    enableSubmit()\r\n\t  })\r\n\r\n\t  function enableSubmit() {\r\n\t    if(!$staffProfile.size()) return;\r\n\r\n\t    var disabled = true\r\n\t    var $submitBtn = $('#submit-btn')\r\n\r\n\t    $checkProfileData.each(function () {\r\n\t      var $el = $(this)\r\n\r\n\t      if ($el.prop('disabled')) return\r\n\r\n\t      var val = $el.val().trim()\r\n\t      if (!val) return\r\n\r\n\t      var name = getName($el.prop('name'))\r\n\t      var originalVal = staffProfileData[name]\r\n\t      var $toggler = $el.closest('.input-group').find('.toggle-form-control-edit:visible')\r\n\r\n\t      if (name === 'username') {\r\n\t        if (val !== originalVal) disabled = false\r\n\t        else $toggler.click()\r\n\t      }\r\n\r\n\t      if ((name === 'first_name' || name === 'last_name')) {\r\n\t        var upperVal = val.toUpperCase()\r\n\t        if (upperVal !== originalVal.toUpperCase()) {\r\n\t          disabled = false\r\n\t          $el.val(upperVal)\r\n\r\n\t        } else $toggler.click()\r\n\t      }\r\n\t    })\r\n\r\n\t    var original = selectedOriginal || []\r\n\t    var options = $selectedCapability.find('option')\r\n\r\n\t    if (options.size() !== original.length) disabled = false\r\n\t    else {\r\n\t      options.each(function () {\r\n\t        if (!_.contains(original, Number($(this).val()))) disabled = false\r\n\t      })\r\n\t    }\r\n\r\n\t    $submitBtn.prop('disabled', disabled)\r\n\t  }\r\n\r\n\t  function getName(propName) {\r\n\t    var NAME_RE = new RegExp(\"\\\\[(\\\\w+)\\\\]$\")\r\n\t    return NAME_RE.exec(propName)[1]\r\n\t  }\r\n\r\n\t  function updateSelections() {\r\n\t    var capabilitiesToSelectFrom = {}\r\n\t    var capabilitiesSelected = {}\r\n\r\n\t    $selectedCapability.find('option').each(function () {\r\n\t      var $el = $(this)\r\n\t      capabilitiesSelected[$el.val()] = $el.text()\r\n\t    })\r\n\t    $capabilitiesSelected.val(JSON.stringify(capabilitiesSelected))\r\n\r\n\t    $selectCapability.find('option').each(function () {\r\n\t      var $el = $(this)\r\n\t      capabilitiesToSelectFrom[$el.val()] = $el.text()\r\n\t    })\r\n\t    $capabilitiesToSelectFrom.val(JSON.stringify(capabilitiesToSelectFrom))\r\n\t    enableSubmit()\r\n\t  }\r\n\t})\r\n\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}